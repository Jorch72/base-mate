local subpoints = {
	capacity = "Capacity",
	amount = "Stored",
	output = "Output",
	input = "EnergyIn",
}

function new(info)
	local p = point.new(info)
	p.subpoints = {}

	local details = peripheral.call(p.side, "getTargetDetails", p.target)

	for name, key in pairs(subpoints) do
		local subpoint = point.new({name = name, state = details and details[key]})
		subpoint.super = p.name
		subpoint.side = info.sensor
		subpoint.target = info.target
		subpoint.key = key
		subpoint.input = function()
			local details = peripiheral.call(subpoint.side, "getTargetDetails", subpoint.target)
			if details then
				return details[subpoint.key]
			end
		end
		subpoint.output = function() end
		table.insert(p.subpoints, subpoint)
	end

	return p
end
